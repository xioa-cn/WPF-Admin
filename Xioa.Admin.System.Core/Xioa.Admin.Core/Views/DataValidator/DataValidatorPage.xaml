<Page x:Class="Xioa.Admin.Core.Views.DataValidator.DataValidatorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="clr-namespace:Xioa.Admin.Core.Views.DataValidator"
      xmlns:vm="clr-namespace:Xioa.Admin.Core.Views.DataValidator.ViewModel"
      mc:Ignorable="d"
      Title="数据验证示例" Height="600" Width="800">

    <Page.DataContext>
        <vm:ValidatorViewModel/>
    </Page.DataContext>

    <Page.Resources>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Height" Value="30"/>
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="True">
                    <Setter Property="ToolTip"
                            Value="{Binding RelativeSource={RelativeSource Self},
                            Path=(Validation.Errors)[0].ErrorContent}"/>
                    <Setter Property="BorderBrush" Value="Red"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style TargetType="TextBlock">
            <Setter Property="Margin" Value="0,5,0,2"/>
            <Setter Property="FontWeight" Value="DemiBold"/>
        </Style>
        
        <Style TargetType="Button">
            <Setter Property="Padding" Value="20,5"/>
            <Setter Property="Margin" Value="0,10"/>
            <Setter Property="MinWidth" Value="100"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Border Background="White" 
                CornerRadius="8" 
                Margin="20" 
                Padding="30"
                BorderBrush="#DDDDDD"
                BorderThickness="1">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel MaxWidth="400">
                    <TextBlock Text="用户注册" 
                             FontSize="24" 
                             FontWeight="Bold" 
                             Margin="0,0,0,20"
                             HorizontalAlignment="Center"/>

                    <!-- 用户名 -->
                    <TextBlock Text="用户名"/>
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>

                    <!-- 邮箱 -->
                    <TextBlock Text="邮箱"/>
                    <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>

                    <!-- 密码 -->
                    <TextBlock Text="密码"/>
                    <PasswordBox x:Name="PasswordBox" 
                               Height="30" 
                               Margin="0,5,0,5"
                               PasswordChanged="PasswordBox_PasswordChanged"/>

                    <!-- 确认密码 -->
                    <TextBlock Text="确认密码"/>
                    <PasswordBox x:Name="ConfirmPasswordBox" 
                               Height="30" 
                               Margin="0,5,0,5"
                               PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>

                    <!-- 年龄 -->
                    <TextBlock Text="年龄"/>
                    <TextBox Text="{Binding Age, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>

                    <!-- 电话号码 -->
                    <TextBlock Text="电话号码"/>
                    <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"/>

                    <!-- 注册按钮 -->
                    <Button Content="注册" 
                            Command="{Binding RegisterCommand}"
                            Background="#2196F3"
                            Foreground="White"
                            BorderThickness="0"/>

                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Page>
